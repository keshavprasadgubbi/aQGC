#include <cstdlib>#include <iostream>#include <fstream>#include <sstream>#include <vector>#include <string>#include <cstring>#include "TSystemDirectory.h"#include "TSystemFile.h"#include "TFile.h"#include "TH1D.h"#include "TH2D.h"#include "TCanvas.h"#include "TTree.h"#include "TString.h"#include "TSystem.h"#include "TROOT.h"#include "TSystem.h"#include "stdio.h"void newrootmacro() {   //--------------Opening the reqd root files -6 files in total for 2 samples SM and M5 --3 for SM and 3 for aQGC  cout<<"Opening the reqd root files\n"<<endl;  //--------SM root files------------  //No Cut-SM  TFile *f_SM_NoCut = new TFile("aQGC_rivetAnalysis-SM-newv5-rivetroutine.root");//SM No Cut root file  if (!f_SM->IsOpen())    {     cout<<"Error opening SM NO CUT root file\n"<<endl;                                                                                                                                                      return;    }  //3TeV Cut    TFile *f_SM_3Cut = new TFile(" ");//SM 3 Tev Cut Root file  if (!f_SM->IsOpen())    {     cout<<"Error opening SM 3TeV CUT root file\n"<<endl;                                                                                                                                                      return;    }    //1TeV Cut    TFile *f_SM_1Cut = new TFile(" ");//SM 1 Tev Cut Root file  if (!f_SM->IsOpen())    {     cout<<"Error opening SM 1TeV cut root file\n"<<endl;                                                                                                                                                      return;    }  //--------M5 root files------------  //No Cut-M5  TFile *f_aQGC_M5_NoCut = new TFile("aQGC_rivetAnalysis-M5-bestlimits-newv5rivetroutine.root");//aQGC M5 NOCUT root file  if (!f_aQGC_M5->IsOpen())    {      cout<<"Error opening M5 NO CUT root file\n"<<endl;                                                                                                                                                            return;    }  //3TeV Cut-M5  TFile *f_aQGC_M5_3Cut = new TFile(" ");//aQGC M5 3 Tev Cut root file    if (!f_aQGC_M2->IsOpen())    {        cout<<"Error opening M5 3TeV CUT root file\n"<<endl;        return;    }    //1TeV Cut-M5  TFile *f_aQGC_M5_1Cut = new TFile(" ");//aQGC M5 1 Tev Cut root file    if (!f_aQGC_M2->IsOpen())    {        cout<<"Error opening M5 1TeV CUT root file\n"<<endl;        return;    }    string vars[34] ={"Ntotev","Njets","Nmu","Nel","Nlep","HT","MET","leadingelectron_pt","leadingmuon_pt", "jet1_pt","jet2_pt","leadingjet_pt","Zlep1_pt","Zlep2_pt","W_lep_pt","Z_m_l_l","WWZ_m","Z_pt_l_l","Whad_pt_q_q","Wlep_pt_l_nu","Z_dPhi_l_l","Whad_dPhi_q_q","Wlep_dPhi_l_MET","Z_dEta_l_l","Whad_dEta_q_q","Whad_m_q_q","Wlep_m_l_nu","Wlep_dEta_l_nu","Z_dR_l_l","Wlep_dR_l_nu","Whad_dR_q_q","singlejet_mass","Jet1_Mass","Jet2_Mass"};    for(int i=0; i<34;++i){    // Define the Canvas                                                                                                                                                                                TCanvas *c = new TCanvas("c", "canvas", 800, 600);   gPad->SetRightMargin(0.05);   gPad->SetTopMargin(0.05);   gStyle->SetOptStat(0);    //Define the variables as a String   std::cout << "Retrieving Root Files" << vars[i] << std::endl;   // lets add the SM histograms                                                                                                                                                                             TH1D* histo1 = (TH1D*)f_SM_NoCut->Get( ("WWZ/"+vars[i]).c_str() );   if(histo1==NULL){std::cout << "ERROR: null pointer for histo1 " << std::endl;}    TH1D* histo2 = (TH1D*)f_SM_3Cut->Get( ("WWZ/"+vars[i]).c_str() );   if(histo2==NULL){std::cout << "ERROR: null pointer for histo1 " << std::endl;}    TH1D* histo3 = (TH1D*)f_SM_1Cut->Get( ("WWZ/"+vars[i]).c_str() );   if(histo3==NULL){std::cout << "ERROR: null pointer for histo1 " << std::endl;}    // lets add the M5 histogram                                                                                                                                                                            TH1D* histo4 = (TH1D*)f_aQGC_M5_NoCut->Get( ("WWZ/"+vars[i]).c_str() );   if(histo4==NULL){std::cout << "ERROR: null pointer for histo2 " << std::endl;}      TH1D* histo5 = (TH1D*)f_aQGC_M5_3Cut->Get( ("WWZ/"+vars[i]).c_str() );   if(histo5==NULL){std::cout << "ERROR: null pointer for histo3 " << std::endl;}     TH1D* histo6 = (TH1D*)f_aQGC_M5_1Cut->Get( ("WWZ/"+vars[i]).c_str() );   if(histo6==NULL){std::cout << "ERROR: null pointer for histo3 " << std::endl;}      //Processing histograms-  add overflow, underflow, Normalization and Rebining   //Overflow and Underflow    //Histo1   int N = histo1->GetNbinsX();   histo1->SetBinContent(N, histo1->GetBinContent(N)+histo1->GetBinContent(N+1));//Overflow   histo1->SetBinContent(1, histo1->GetBinContent(1)+histo1->GetBinContent(0));//Underflow      //Histo2                                                                                                                                                                           N = histo2->GetNbinsX();   histo2->SetBinContent(N, histo2->GetBinContent(N)+histo2->GetBinContent(N+1));//Overflow                                                                                                                   histo2->SetBinContent(1, histo2->GetBinContent(1)+histo2->GetBinContent(0));//Underflow        //Histo3    N = histo3->GetNbinsX();    histo3->SetBinContent(N, histo3->GetBinContent(N)+histo3->GetBinContent(N+1));//Overflow    histo3->SetBinContent(1, histo3->GetBinContent(1)+histo3->GetBinContent(0));//Underflow        //Histo4    N = histo4->GetNbinsX();    histo4->SetBinContent(N, histo4->GetBinContent(N)+histo4->GetBinContent(N+1));//Overflow    histo4->SetBinContent(1, histo4->GetBinContent(1)+histo4->GetBinContent(0));//Underflow    //Histo5    N = histo5->GetNbinsX();    histo5->SetBinContent(N, histo5->GetBinContent(N)+histo5->GetBinContent(N+1));//Overflow    histo5->SetBinContent(1, histo5->GetBinContent(1)+histo5->GetBinContent(0));//Underflow    //Histo6    N = histo6->GetNbinsX();    histo6->SetBinContent(N, histo6->GetBinContent(N)+histo6->GetBinContent(N+1));//Overflow    histo6->SetBinContent(1, histo6->GetBinContent(1)+histo6->GetBinContent(0));//Underflow    //Normalizing histograms to 1   //Want the cut flow histogram to be showing absolute number of events- so removing the feature to normalize the histograms to 1                                          if(vars[i]=="Ntotev" ){     histo1->Scale();//In order to obtain the cut flow histo in terms of absolute number of events after respective cut!     histo2->Scale();     histo3->Scale();     histo4->Scale();     histo5->Scale();     histo6->Scale();   }   else{              histo1->Scale(1./histo1->Integral());     histo2->Scale(1./histo2->Integral());     histo3->Scale(1./histo3->Integral());     histo4->Scale(1./histo4->Integral());     histo5->Scale(1./histo5->Integral());     histo6->Scale(1./histo6->Integral());   } //- plot distributions must be normalised to 1 (e.g. scaled to unity by doing h->Scale(1./h->Integral())) to compare shapes of the two samples     //Rebinning                                                                                                                                                                  int rebin=0;   //Let me try putting in all observables that need to be rebinned inside the if condition    if(vars[i]=="HT"||vars[i]=="MET"||vars[i]=="leadingelectron_pt"||vars[i]=="leadingmuon_pt"||vars[i]=="leadingjet_pt"||vars[i]=="WWZ_m"||vars[i]=="jet1_pt"||vars[i]=="jet2_pt"||vars[i]=="Z_pt_l,l"||vars[i]=="Whad_pt_q,q"||vars[i]=="Whad_dPhi_q_q"||vars[i]=="Wlep_dPhi_l_nu"||vars[i]=="Z_dEta_l_l"||vars[i]=="Whad_dEta_q_q"||vars[i]=="Wlep_dEta_l_nu"||vars[i]=="Z_dR_l_l"||vars[i]=="Wlep_dR_l_nu"||vars[i]=="Whad_dR_q_q"){     rebin=4;     histo1->Rebin(rebin);     histo2->Rebin(rebin);     histo3->Rebin(rebin);     histo4->Rebin(rebin);     histo5->Rebin(rebin);     histo6->Rebin(rebin);        }  //Cosmetics  // Histo1 settings  histo1->SetTitle("");                                                                                                                                                        histo1->SetFillStyle(3444);  histo1->SetLineColor(kBlack);  histo1->SetLineWidth(2);  //  histo1->SetMarkerColor();  histo1->SetMarkerStyle(8);  histo1->SetMarkerSize(0.5);  histo1->SetLineStyle(1);  //Setting Minimum and Maximum -Histo1  histo1->SetMinimum(0);  if(vars[i]=="Z_dEta_l_l"||vars[i]=="Whad_dEta_q_q"||vars[i]=="Wlep_dEta_l_nu"){      histo1->SetMaximum(0.7);        }        if(vars[i]=="Z_dR_l_l"||vars[i]=="Wlep_dR_l_nu"||vars[i]=="Whad_dR_q_q"||vars[i]=="Z_dR_l_l"){            histo1->SetMaximum(0.5);        }        if(vars[i]=="Whad_dPhi_q_q"||vars[i]=="Z_dPhi_l_l"){            histo1->SetMaximum(0.6);        }        if(vars[i]=="Wlep_dPhi_l_MET"){            histo1->SetMaximum(0.6);        }  histo1->GetYaxis()->SetTitleOffset(1.4);  histo1->GetXaxis()->SetTitleOffset(1.4);  //histo1 -Y axis                                                                                                                                                                                  //histo1->GetYaxis()->SetTitle("No. of events");  //histo1->GetYaxis()->SetTitleSize(0.20);  //histo1->GetYaxis()->SetTitleFont(43);  //histo1->GetYaxis()->SetTitleOffset(1.4);  //histo1->GetYaxis()->SetLabelSize(0.03);  //Histo1- Xaxis  //histo1->GetXaxis()->SetTitle("Mass [GeV]");//I commented this since i dont want to forcefully add one label to all histos and the label must be picked as given in rivet routine while booking the histogram   //histo1->GetXaxis()->SetTitleSize(0.2);//Set 0 to remove the label for axis  //histo1->GetXaxis()->SetTitleFont(43);  //histo1->GetXaxis()->SetTitleOffset(1.4);  //histo1->GetXaxis()->SetLabelSize(0.03);//###############---------------------  // histo2 settings                                                                                                                                                                                     histo2->SetTitle("");                                                                                                                                                                                      histo2->SetFillStyle(0);  histo2->SetLineColor(kBlack);  histo2->SetLineWidth(2);  histo2->SetLineStyle(2);  // histo2->SetMarkerColor();  histo2->SetMarkerStyle(25);  histo2->SetMarkerSize(1.2);    //Setting Minimum and Maximum -Histo2  histo2->SetMinimum(0);  if(vars[i]=="Z_dEta_l_l"||vars[i]=="Whad_dEta_q_q"||vars[i]=="Wlep_dEta_l_nu"){  histo2->SetMaximum(0.7);  }  if(vars[i]=="Z_dR_l_l"||vars[i]=="Wlep_dR_l_nu"||vars[i]=="Whad_dR_q_q"||vars[i]=="Z_dR_l_l"){    histo2->SetMaximum(0.5);  }   if(vars[i]=="Whad_dPhi_q_q"||vars[i]=="Z_dPhi_l_l"){      histo2->SetMaximum(0.5);  }  if(vars[i]=="Wlep_dPhi_l_nu"){    histo2->SetMaximum(1.0);  }  //histo2 -Y axis                                                                                                                                                                                           //histo2->GetYaxis()->SetTitle("No. of events");                                                                                                                                                           //histo2->GetYaxis()->SetTitleSize(0.20);  //histo2->GetYaxis()->SetTitleFont(43);  histo2->GetYaxis()->SetTitleOffset(1.4);  //histo2->GetYaxis()->SetLabelSize(0.03);  //Histo2- Xaxis                                                                                                                                                                                            //histo2->GetXaxis()->SetTitle("Mass [GeV]");  //histo2->GetXaxis()->SetTitleSize(0.1);//Set 0 to remove the label for axis                                                                                                                                 //histo2->GetXaxis()->SetTitleFont(43);  histo2->GetXaxis()->SetTitleOffset(1.4);  //histo2->GetXaxis()->SetLabelSize(0.03);//###############---------------------  //Histo 3 settings                                                                                                                                                                                     histo3->SetTitle("");                                                                                                                                                                                      histo3->SetFillStyle(0);  histo3->SetLineColor(kBlack);  histo3->SetLineWidth(2);  histo3->SetLineStyle(3);  // histo3->SetMarkerColor();  histo3->SetMarkerStyle(21);  histo3->SetMarkerSize(0.5);    //Setting Minimum and Maximum -Histo3  histo3->SetMinimum(0);  if(vars[i]=="Z_dEta_l_l"||vars[i]=="Whad_dEta_q_q"||vars[i]=="Wlep_dEta_l_nu"){  histo3->SetMaximum(0.7);  }  if(vars[i]=="Z_dR_l_l"||vars[i]=="Wlep_dR_l_nu"||vars[i]=="Whad_dR_q_q"||vars[i]=="Z_dR_l_l"){    histo3->SetMaximum(0.5);  }   if(vars[i]=="Whad_dPhi_q_q"||vars[i]=="Z_dPhi_l_l"){      histo3->SetMaximum(0.5);  }  if(vars[i]=="Wlep_dPhi_l_nu"){    histo3->SetMaximum(1.0);  }  //histo3 -Y axis                                                                                                                                                                                           //histo3->GetYaxis()->SetTitle("No. of events");                                                                                                                                                           //histo3->GetYaxis()->SetTitleSize(0.20);  //histo3->GetYaxis()->SetTitleFont(43);  histo3->GetYaxis()->SetTitleOffset(1.4);  //histo3->GetYaxis()->SetLabelSize(0.03);  //Histo3- Xaxis                                                                                                                                                                                            //histo3->GetXaxis()->SetTitle("Mass [GeV]");  //histo3->GetXaxis()->SetTitleSize(0.1);//Set 0 to remove the label for axis                                                                                                                                 //histo3->GetXaxis()->SetTitleFont(43);  histo3->GetXaxis()->SetTitleOffset(1.4);  //histo3->GetXaxis()->SetLabelSize(0.03);//###############---------------------  //Histo 4 settings                                                                                                                                                                                     histo4->SetTitle("");                                                                                                                                                                                      histo4->SetFillStyle(3444);  histo4->SetLineColor(922);  histo4->SetLineWidth(2);  histo4->SetLineStyle(2);  // histo4->SetMarkerColor();  histo4->SetMarkerStyle(8);  histo4->SetMarkerSize(0.5);    //Setting Minimum and Maximum -Histo4  histo4->SetMinimum(0);  if(vars[i]=="Z_dEta_l_l"||vars[i]=="Whad_dEta_q_q"||vars[i]=="Wlep_dEta_l_nu"){  histo4->SetMaximum(0.7);  }  if(vars[i]=="Z_dR_l_l"||vars[i]=="Wlep_dR_l_nu"||vars[i]=="Whad_dR_q_q"||vars[i]=="Z_dR_l_l"){    histo4->SetMaximum(0.5);  }   if(vars[i]=="Whad_dPhi_q_q"||vars[i]=="Z_dPhi_l_l"){      histo4->SetMaximum(0.5);  }  if(vars[i]=="Wlep_dPhi_l_nu"){    histo4->SetMaximum(1.0);  }  //histo4 -Y axis                                                                                                                                                                                           //histo4->GetYaxis()->SetTitle("No. of events");                                                                                                                                                           //histo4->GetYaxis()->SetTitleSize(0.20);  //histo4->GetYaxis()->SetTitleFont(43);  histo4->GetYaxis()->SetTitleOffset(1.4);  //histo4->GetYaxis()->SetLabelSize(0.03);  //Histo4- Xaxis                                                                                                                                                                                            //histo4->GetXaxis()->SetTitle("Mass [GeV]");  //histo4->GetXaxis()->SetTitleSize(0.1);//Set 0 to remove the label for axis                                                                                                                                 //histo4->GetXaxis()->SetTitleFont(43);  histo4->GetXaxis()->SetTitleOffset(1.4);  //histo4->GetXaxis()->SetLabelSize(0.03);//###############---------------------//Histo 5 settings                                                                                                                                                                                     histo5->SetTitle("");                                                                                                                                                                                      histo5->SetFillStyle(0);  histo5->SetLineColor(kBlue);  histo5->SetLineWidth(2);  histo5->SetLineStyle(2);  // histo5->SetMarkerColor();  histo5->SetMarkerStyle(8);  histo5->SetMarkerSize(1.5);    //Setting Minimum and Maximum -Histo5  histo5->SetMinimum(0);  if(vars[i]=="Z_dEta_l_l"||vars[i]=="Whad_dEta_q_q"||vars[i]=="Wlep_dEta_l_nu"){  histo5->SetMaximum(0.7);  }  if(vars[i]=="Z_dR_l_l"||vars[i]=="Wlep_dR_l_nu"||vars[i]=="Whad_dR_q_q"||vars[i]=="Z_dR_l_l"){    histo5->SetMaximum(0.5);  }   if(vars[i]=="Whad_dPhi_q_q"||vars[i]=="Z_dPhi_l_l"){      histo5->SetMaximum(0.5);  }  if(vars[i]=="Wlep_dPhi_l_nu"){    histo5->SetMaximum(1.0);  }  //histo5 -Y axis                                                                                                                                                                                           //histo5->GetYaxis()->SetTitle("No. of events");                                                                                                                                                           //histo5->GetYaxis()->SetTitleSize(0.20);  //histo5->GetYaxis()->SetTitleFont(43);  histo5->GetYaxis()->SetTitleOffset(1.4);  //histo5->GetYaxis()->SetLabelSize(0.03);  //Histo5- Xaxis                                                                                                                                                                                            //histo5->GetXaxis()->SetTitle("Mass [GeV]");  //histo5->GetXaxis()->SetTitleSize(0.1);//Set 0 to remove the label for axis                                                                                                                                 //histo5->GetXaxis()->SetTitleFont(43);  histo5->GetXaxis()->SetTitleOffset(1.4);  //histo5->GetXaxis()->SetLabelSize(0.03);//###############---------------------  //Histo 6 settings                                                                                                                                                                                     histo6->SetTitle("");                                                                                                                                                                                      histo6->SetFillStyle(1);  histo6->SetLineColor(kBlue);  histo6->SetLineWidth(2);  histo6->SetLineStyle(3);  // histo6->SetMarkerColor();  histo6->SetMarkerStyle(25);  histo6->SetMarkerSize(1.5);  histo3->SetFillColorAlpha(kGray, 0.5);  //Setting Minimum and Maximum -Histo6  histo6->SetMinimum(0);  if(vars[i]=="Z_dEta_l_l"||vars[i]=="Whad_dEta_q_q"||vars[i]=="Wlep_dEta_l_nu"){  histo6->SetMaximum(0.7);  }  if(vars[i]=="Z_dR_l_l"||vars[i]=="Wlep_dR_l_nu"||vars[i]=="Whad_dR_q_q"||vars[i]=="Z_dR_l_l"){    histo6->SetMaximum(0.5);  }   if(vars[i]=="Whad_dPhi_q_q"||vars[i]=="Z_dPhi_l_l"){      histo6->SetMaximum(0.5);  }  if(vars[i]=="Wlep_dPhi_l_nu"){    histo6->SetMaximum(1.0);  }  //histo6 -Y axis                                                                                                                                                                                           //histo6->GetYaxis()->SetTitle("No. of events");                                                                                                                                                           //histo6->GetYaxis()->SetTitleSize(0.20);  //histo6->GetYaxis()->SetTitleFont(43);  histo6->GetYaxis()->SetTitleOffset(1.4);  //histo6->GetYaxis()->SetLabelSize(0.03);  //Histo6- Xaxis                                                                                                                                                                                            //histo6->GetXaxis()->SetTitle("Mass [GeV]");  //histo6->GetXaxis()->SetTitleSize(0.1);//Set 0 to remove the label for axis                                                                                                                                 //histo6->GetXaxis()->SetTitleFont(43);  histo6->GetXaxis()->SetTitleOffset(1.4);  //histo6->GetXaxis()->SetLabelSize(0.03);//###############---------------------  //Drawing both histos- including "HITSOE" for all histos...in this beautiful rectangular histos with error bars  histo1->Draw("HISTOE");  histo2->Draw("HISTOEsame");  histo3->Draw("HISTOEsame");  histo4->Draw("HISTOEsame");  histo5->Draw("HISTOEsame");  histo6->Draw("HISTOEsame");          //Legend  TLegend *leg = new TLegend(0.85,0.85,0.95,0.95);  leg->SetBorderSize(1);  //0 means no border  leg->SetNColumns(1);  leg->SetTextSize(0.04);  leg->SetTextFont(42);  leg->SetFillStyle(0);  leg->AddEntry(histo1,"SM-NoCut","l");  leg->AddEntry(histo2,"SM-3TevCut","l");  leg->AddEntry(histo3,"SM-1TevCut","l");  leg->AddEntry(histo4,"M5-NoCut","l");  leg->AddEntry(histo5,"SM-3TevCut","l");  leg->AddEntry(histo6,"SM-1TevCut","l");  leg->Draw("Same");  c->Update();  c->Draw();    c->SaveAs( (vars[i]+".pdf").c_str() );  } //end of for loop}//end of rootmacro()